(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{383:function(s,t,a){"use strict";a.r(t);var n=a(49),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"模块化开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化开发"}},[s._v("#")]),s._v(" 模块化开发")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("写在前面")]),s._v(" "),a("p",[s._v("其实就我来说入行并不算晚，15年底，应该算是刚好踏上了移动互联网爆发的时间点（不然也找不到工作吧），但是后续一直在这家公司确实耽误了很多（技能方面）。就拿这个模块化开发的概念来说，其实在很早很早之前就有这方面的概念了，但是学习能力比较差，因为学历低（中专），且是电工转行，接触不到除公司之外其他任何的技术人员，自己的性格又不喜欢和陌生人聊天。导致自己进入了一个封闭的学习状态，封装了很多现在看起来基本就是垃圾的模块和功能库（对比一下老师讲的内容其实一直都在第一阶段来回徘徊）。现在回想起来，也不知道应该庆幸（发现了问题）还是应该可悲（用了太长时间才发现）。")])]),s._v(" "),a("h2",{attrs:{id:"演化过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#演化过程"}},[s._v("#")]),s._v(" 演化过程")]),s._v(" "),a("blockquote",[a("p",[s._v("模块化开发其实就是一个思想，他的实现方式是多种多样的。且从一开始到现在是有一个循序渐进的演化过程的。")])]),s._v(" "),a("h3",{attrs:{id:"_1-文件划分的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-文件划分的方式"}},[s._v("#")]),s._v(" 1. 文件划分的方式")]),s._v(" "),a("p",[s._v("就是最原始的把某个功能或者模块放到某个文件里面去，然后口头约定来实现模块化。\n"),a("strong",[s._v("缺点")])]),s._v(" "),a("ul",[a("li",[s._v("会污染全局作用域")]),s._v(" "),a("li",[s._v("会有命名冲突")]),s._v(" "),a("li",[s._v("模块之间没有从属关系无法管理依赖")])]),s._v(" "),a("h3",{attrs:{id:"_2-命名空间的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-命名空间的方式"}},[s._v("#")]),s._v(" 2. 命名空间的方式")]),s._v(" "),a("p",[s._v("相较于第一种方式，这种方式仅仅只是把一个文件里面的方法都放到一个对象下面而已，仅仅只是小范围的解决了第一种方法的命名冲突问题。")]),s._v(" "),a("h3",{attrs:{id:"_3-iife"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-iife"}},[s._v("#")]),s._v(" 3. IIFE")]),s._v(" "),a("p",[s._v("立即执行函数，相较于第一第二种方法，立即执行函数实现了命名空间。但他的方式依然是非常的刀耕火种。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" num "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'body'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hidden'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("我自己对模块化的探索也就仅仅到此为止了。")])]),s._v(" "),a("h2",{attrs:{id:"崭露头角"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#崭露头角"}},[s._v("#")]),s._v(" 崭露头角")]),s._v(" "),a("h3",{attrs:{id:"commonjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs"}},[s._v("#")]),s._v(" CommonJS")]),s._v(" "),a("p",[a("code",[s._v("nodejs")]),s._v(" 的 "),a("code",[s._v("commonjs")]),s._v(" 规范才算是能真正称得上模块化开发的一种开发方式。")]),s._v(" "),a("ul",[a("li",[s._v("他一个文件就是一个模块")]),s._v(" "),a("li",[s._v("每个模块都有自己的独立作用域")]),s._v(" "),a("li",[s._v("他通过 "),a("code",[s._v("module.exports")]),s._v(" 导出成员")]),s._v(" "),a("li",[s._v("然后通过 "),a("code",[s._v("require")]),s._v(" 函数载入函数")])]),s._v(" "),a("p",[s._v("但是 "),a("code",[s._v("commonjs")]),s._v(" 加载模块的方式是使用同步加载的，在 "),a("code",[s._v("nodejs")]),s._v(" 中没有什么问题，却并不适用于浏览器环境。")]),s._v(" "),a("h3",{attrs:{id:"amd-asynchronous-module-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#amd-asynchronous-module-definition"}},[s._v("#")]),s._v(" AMD (Asynchronous Module Definition)")]),s._v(" "),a("p",[s._v("一个适用于浏览器环境的 "),a("strong",[s._v("异步模块化开发标准")]),s._v("，代表作就是 "),a("code",[s._v("Require.js")]),s._v("。他可以解决上面没有解决的命名空间和依赖管理的问题。")]),s._v(" "),a("p",[s._v("定义一个模块的时候，他接受三个参数")]),s._v(" "),a("ul",[a("li",[s._v("第一个参数是一个字符串，为当前模块的名字")]),s._v(" "),a("li",[s._v("第二个参数是一个数组，为需要加载的模块")]),s._v(" "),a("li",[s._v("第三个参数是一个函数，函数内的参数分别对应第二个参数加载的模块")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'module1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jquery'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" _")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("handleBtn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'body'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hidden'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("使用一个 "),a("code",[s._v("AMD")]),s._v(" 模块。")]),s._v(" "),a("ul",[a("li",[s._v("第一个参数是数组，为想要加载的模块")]),s._v(" "),a("li",[s._v("第二个参数是函数，函数的参数对应加载的模块")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'module1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'module1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  module1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("handleBtn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("code",[s._v("AMD")]),s._v(" 可以实现模块化标准，但是使用起来还是麻烦的，因为除了业务代码之外，还要去写一堆模块化标准的代码。")]),s._v(" "),a("h2",{attrs:{id:"的最佳实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#的最佳实践"}},[s._v("#")]),s._v(" 的最佳实践")]),s._v(" "),a("p",[s._v("这里没啥好说的了，因为就是一直都在用的。")]),s._v(" "),a("ul",[a("li",[s._v("浏览器环境就是 "),a("code",[s._v("ES Modules")]),s._v(" 规范")]),s._v(" "),a("li",[a("code",[s._v("nodejs")]),s._v(" 环境就是 "),a("code",[s._v("commonjs")]),s._v(" 规范")])]),s._v(" "),a("h3",{attrs:{id:"es-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es-modules"}},[s._v("#")]),s._v(" "),a("code",[s._v("ES Modules")])]),s._v(" "),a("p",[s._v("基本上现代浏览器都原生支持 "),a("code",[s._v("ES Modules")]),s._v(" 规范了。")]),s._v(" "),a("p",[a("strong",[s._v("特性")])]),s._v(" "),a("ul",[a("li",[s._v("他会自动启用严格模式，哪怕没有定义 "),a("code",[s._v("use strict")]),s._v(" 也会自动启用。")]),s._v(" "),a("li",[s._v("每个模块都有自己独立的作用域。")]),s._v(" "),a("li",[a("code",[s._v("ES Modules")]),s._v(" 是通过 "),a("code",[s._v("CORS")]),s._v(" 去请求外链的，所以要求服务端设置不跨域，否则会出现跨域报错。")]),s._v(" "),a("li",[a("code",[s._v("ES Modules")]),s._v(" 引入的 "),a("code",[s._v("script")]),s._v(" 标签会延迟执行。")])]),s._v(" "),a("p",[s._v("基础的导入导出语法没有什么好记的，都是一些经常用的基础语法，但是有一点之前不了解的地方。")]),s._v(" "),a("h4",{attrs:{id:"大括号语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#大括号语法"}},[s._v("#")]),s._v(" 大括号语法")]),s._v(" "),a("p",[s._v("下面这里的导入 "),a("code",[s._v("b")]),s._v(" 并不是导入一个对象，导出 "),a("code",[s._v("a")]),s._v(" 也不是导出一个对象，这里的大括号是标准的语法，并不是 "),a("code",[s._v("es6")]),s._v(" 的解构语法。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./modules-b.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  a\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"default"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#default"}},[s._v("#")]),s._v(" default")]),s._v(" "),a("p",[s._v("之前一直都理解错误，认为 "),a("code",[s._v("export")]),s._v(" 的时候要么导出大括号，要么导出 "),a("code",[s._v("default")]),s._v("，其实两者是可以共存的，"),a("code",[s._v("default")]),s._v(" 只是提供一个默认的选项而已。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 模块 a")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("引用")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 模块 b")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./modules-a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"中继转发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#中继转发"}},[s._v("#")]),s._v(" 中继转发")]),s._v(" "),a("p",[s._v("在做大型项目的时候，一个目录下可能会有很多个模块文件同时存在，这时候可以可以使用一个 "),a("code",[s._v("index.js")]),s._v(" 作为中继文件转发出当前目录下的所有文件，那样在引用这个目录下的模块的时候就不用去一个个找文件了。")]),s._v(" "),a("h4",{attrs:{id:"直接导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#直接导出"}},[s._v("#")]),s._v(" 直接导出")]),s._v(" "),a("p",[s._v("还可以直接把导出的文件导出出去")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" moduelsA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./modules-a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"执行-但是不引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行-但是不引用"}},[s._v("#")]),s._v(" 执行，但是不引用")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./modules-a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 或者 ")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./modules-a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"在文件中间导入模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在文件中间导入模块"}},[s._v("#")]),s._v(" 在文件中间导入模块")]),s._v(" "),a("p",[s._v("通常情况下，"),a("code",[s._v("import")]),s._v(" 只能在文件的最顶部使用，但是也有个别的情况需要在代码内部进行引入，如需要执行判断后再使用的情况，这时候就可以使用 "),a("code",[s._v("import")]),s._v(" 函数去引用模块。引入的模块他会返回一个 "),a("code",[s._v("Promise")]),s._v("，所以可以使用 "),a("code",[s._v(".then")]),s._v(" 方法去接受模块加载回来的结果。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./modules-a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("modulesa")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("modulesa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"低版本兼容性处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#低版本兼容性处理"}},[s._v("#")]),s._v(" 低版本兼容性处理")]),s._v(" "),a("h3",{attrs:{id:"ie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ie"}},[s._v("#")]),s._v(" IE")]),s._v(" "),a("p",[a("code",[s._v("ie")]),s._v(" 不支持 "),a("code",[s._v("ES Module")]),s._v(" 语法，这里可以使用第三方的 "),a("code",[s._v("polyfill")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/ModuleLoader/browser-es-module-loader",target:"_blank",rel:"noopener noreferrer"}},[s._v("browser-es-module-loader"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/taylorhakes/promise-polyfill",target:"_blank",rel:"noopener noreferrer"}},[s._v("promise-polyfill"),a("OutboundLink")],1)])]),s._v(" "),a("h4",{attrs:{id:"nomodule"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nomodule"}},[s._v("#")]),s._v(" nomodule")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("nomodule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'这里面的代码只会在不支持 ES module 的浏览器里面执行'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"在-nodejs-中使用-es-module-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-nodejs-中使用-es-module-语法"}},[s._v("#")]),s._v(" 在 nodejs 中使用 ES Module 语法")]),s._v(" "),a("p",[a("code",[s._v("nodejs")]),s._v(" 中已经可以使用 "),a("code",[s._v("ES Module")]),s._v(" 语法了，只是目前还是处于试验状态，他使用起来和在浏览器环境中有一些小区别。")]),s._v(" "),a("ul",[a("li",[s._v("因为目前是试验属性，所以后缀要改成 "),a("code",[s._v(".mjs")]),s._v("。")]),s._v(" "),a("li",[s._v("可以在代码中间的位置使用 "),a("code",[s._v("import")]),s._v(" 语法引入模块，浏览器中只能使用 "),a("code",[s._v("import()")]),s._v(" 函数。")]),s._v(" "),a("li",[s._v("在使用"),a("code",[s._v("nodejs")]),s._v("的第三方模块的时候，除非第三方模块特别声明了，否则是不能使用 "),a("code",[s._v("{}")]),s._v(" 提取的方式去提取模块中的内置成员，因为 "),a("code",[s._v("nodejs")]),s._v(" 的第三方组件库一般都是直接导出一个对象。但是 "),a("code",[s._v("nodejs")]),s._v(" 的官方模块做了这方面的处理，可以使用 "),a("code",[s._v("{}")]),s._v(" 的方式提取内置方法。")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" _ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cloneDeep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里会报错，无法提取内置模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" cloneDeep "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cloneDeep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" fs "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("writeFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可以正常执行，因为内置模块都做了兼容处理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" writeFileSync "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("writeFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"commonjs-和-es-module-的交互"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-和-es-module-的交互"}},[s._v("#")]),s._v(" commonjs 和 es module 的交互")]),s._v(" "),a("ul",[a("li",[s._v("ES Module 中可以导入 CommonJS 模块")]),s._v(" "),a("li",[s._v("CommonJS 中不能导入 ES Module 模块")]),s._v(" "),a("li",[s._v("区别于 ES Module，CommonJS 只会导出一个默认的成员")]),s._v(" "),a("li",[s._v("ES Module 中的 import 语法只是固定语法，并不能解构导出的对象！")]),s._v(" "),a("li",[s._v("ES Module 中的 import 语法只是固定语法，并不能解构导出的对象！！")]),s._v(" "),a("li",[s._v("ES Module 中的 import 语法只是固定语法，并不能解构导出的对象！！！")]),s._v(" "),a("li",[s._v("ES Module 中不能使用 CommonJS 中那些内置的方法。")])]),s._v(" "),a("h3",{attrs:{id:"新版-nodejs-中对-es-module-的进一步支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新版-nodejs-中对-es-module-的进一步支持"}},[s._v("#")]),s._v(" 新版 nodejs 中对 ES Module 的进一步支持")]),s._v(" "),a("p",[s._v("在 12.X 以后的 "),a("code",[s._v("nodejs")]),s._v(" 版本中，可以在 "),a("code",[s._v("package.json")]),s._v(" 里面定义一个 "),a("code",[s._v("type")]),s._v(" 字段为 "),a("code",[s._v("module")]),s._v(" 来声明当前项目下的文件都是使用 "),a("code",[s._v("ES Module")]),s._v(" 规范进行开发的，这样就可以不用在把后缀改成 "),a("code",[s._v(".mjs")]),s._v(" 了。但是这样就不能使用 "),a("code",[s._v("Commonjs")]),s._v(" 规范，如果要使用的话，就需要把对应的文件后缀改成 "),a("code",[s._v(".cjs")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"bebal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bebal"}},[s._v("#")]),s._v(" bebal")]),s._v(" "),a("p",[s._v("可以直接使用 "),a("code",[s._v("bebal")]),s._v(" 在 "),a("code",[s._v("nodejs")]),s._v(" 中使用 "),a("code",[s._v("ES Module")]),s._v(" 语法。")])])}),[],!1,null,null,null);t.default=e.exports}}]);