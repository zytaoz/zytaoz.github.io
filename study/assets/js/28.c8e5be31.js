(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{389:function(s,a,t){"use strict";t.r(a);var e=t(49),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[s._v("#")]),s._v(" MySql")]),s._v(" "),t("h2",{attrs:{id:"基本概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[s._v("#")]),s._v(" 基本概念")]),s._v(" "),t("h3",{attrs:{id:"基础知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[s._v("#")]),s._v(" 基础知识")]),s._v(" "),t("p",[s._v("mysql 的默认端口是 3306")]),s._v(" "),t("h3",{attrs:{id:"字段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字段"}},[s._v("#")]),s._v(" 字段")]),s._v(" "),t("h3",{attrs:{id:"关系模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关系模型"}},[s._v("#")]),s._v(" 关系模型")]),s._v(" "),t("h3",{attrs:{id:"数据类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[s._v("#")]),s._v(" 数据类型")]),s._v(" "),t("h2",{attrs:{id:"查询数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询数据"}},[s._v("#")]),s._v(" 查询数据")]),s._v(" "),t("h3",{attrs:{id:"基本查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本查询"}},[s._v("#")]),s._v(" 基本查询")]),s._v(" "),t("p",[s._v("要查询数据表，可以使用下面这个语句")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("SELECT")]),s._v("  是关键字，表示要执行一个查询")]),s._v(" "),t("li",[t("code",[s._v("*")]),s._v("       代表要查询这表的所有列，也可以指定列的名字")]),s._v(" "),t("li",[t("code",[s._v("FROM")]),s._v("    是关键字，表示要从哪个表查询")]),s._v(" "),t("li",[t("code",[s._v("students")]),s._v(" 是表名，代表我要从一个叫做 "),t("code",[s._v("students")]),s._v(" 的表里面查询数据")])]),s._v(" "),t("br"),s._v(" "),t("p",[t("code",[s._v("FROM")]),s._v(" 语句并不是必须的。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" + "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("\n\n-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("MySQL还可以用于计算，但是计算并不是MySQL的强项。"),t("br"),s._v("\n不带 "),t("code",[s._v("FROM")]),s._v(" 字句的的 "),t("code",[s._v("SELECT")]),s._v(" 语句还有一个作用，就是检查数据库链接是否有效。")]),s._v(" "),t("h3",{attrs:{id:"条件查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#条件查询"}},[s._v("#")]),s._v(" 条件查询")]),s._v(" "),t("p",[s._v("有时候我们并不想把所有的数据，都查询出来，而是要查询一些经过筛选的数据。 "),t("br")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("表名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" WHERE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("条件表达式"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("WHERE")]),s._v(" 是关键字，用来设定查询条件")])]),s._v(" "),t("p",[s._v("这时有一张 "),t("code",[s._v("students")]),s._v(" 的表格，里面有一个列名是 "),t("code",[s._v("score")]),s._v(" 是学生的成绩，那我想查询所有及格学生的信息。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE score "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("需要注意的是，如果查询条件为字符串的话，一定要加引号")])]),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"and"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#and"}},[s._v("#")]),s._v(" AND")]),s._v(" "),t("p",[t("code",[s._v("AND")]),s._v(" 关键字代表有多重查询条件，且要满足所有的查询条件。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE score "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" AND gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，要满足 "),t("code",[s._v("score >= 60")]),s._v(" 且 "),t("code",[s._v("gender = 'boy'")]),s._v("两个条件。")]),s._v(" "),t("h4",{attrs:{id:"or"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#or"}},[s._v("#")]),s._v(" OR")]),s._v(" "),t("p",[t("code",[s._v("OR")]),s._v(" 关键字代表有多重查询条件，仅需满足其中一个查询条件即可。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE score "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" OR gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，要满足 "),t("code",[s._v("score >= 60")]),s._v(" 或者 "),t("code",[s._v("gender = 'boy'")]),s._v("两个条件其中的一个。")]),s._v(" "),t("h4",{attrs:{id:"not"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#not"}},[s._v("#")]),s._v(" NOT")]),s._v(" "),t("p",[t("code",[s._v("NOT")]),s._v(" 关键字表示不符合该条件的数据。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE NOT gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，要找到 "),t("code",[s._v("gender")]),s._v(" 不是 "),t("code",[s._v("boy")]),s._v(" 的所有数据。\n"),t("br")]),s._v(" "),t("p",[s._v("其中 "),t("code",[s._v("NOT gender = 'boy'")]),s._v(" 可以使用 "),t("code",[s._v("gender <> 'boy'")]),s._v(" 来代替")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"like"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#like"}},[s._v("#")]),s._v(" LIKE")]),s._v(" "),t("p",[t("code",[s._v("LIKE")]),s._v(" 关键字表示模糊查询，其中 "),t("code",[s._v("%")]),s._v(" 表示任意字符。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE name LIKE "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ab%'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，要找到 "),t("code",[s._v("name")]),s._v(" 列中以 "),t("code",[s._v("ab")]),s._v(" 开头的数据。可能是 "),t("code",[s._v("ab")]),s._v(" "),t("code",[s._v("abs")]),s._v(" "),t("code",[s._v("abd")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE name LIKE "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%cd%'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，要找到 "),t("code",[s._v("name")]),s._v(" 列中包含 "),t("code",[s._v("cd")]),s._v(" 的数据。可能是 "),t("code",[s._v("abcd")]),s._v(" "),t("code",[s._v("abcds")]),s._v(" "),t("code",[s._v("acdbd")]),s._v("。")]),s._v(" "),t("h4",{attrs:{id:"between"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#between"}},[s._v("#")]),s._v(" BETWEEN")]),s._v(" "),t("p",[t("code",[s._v("BETWEEN")]),s._v(" 关键字表示选择介于两个值之间的数据范围。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE score BETWEEN "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" AND "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，找到 "),t("code",[s._v("score")]),s._v(" 大于等于60并且小于等于90的数据")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE class BETWEEN "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),s._v(" AND "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'f'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，找到 "),t("code",[s._v("class")]),s._v(" 在字母 "),t("code",[s._v("a")]),s._v(" 和 "),t("code",[s._v("f")]),s._v(" 之间的数据。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students WHERE "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" BETWEEN "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2010-01-01'")]),s._v(" AND "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2019-01-01'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，找到 "),t("code",[s._v("date")]),s._v(" 在 "),t("code",[s._v("2010-01-01")]),s._v(" 到 "),t("code",[s._v("2019-01-01")]),s._v(" 这中间日期的数据。")]),s._v(" "),t("h4",{attrs:{id:"混合查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#混合查询"}},[s._v("#")]),s._v(" 混合查询")]),s._v(" "),t("p",[s._v("如果要使用多种条件进行混合查询的话，就要使用小括号来表示如何进行条件运算了。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM student WHERE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" OR score "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" AND gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询，"),t("code",[s._v("score")]),s._v(" 小于 80 或者大于 90，并且 "),t("code",[s._v("gender")]),s._v(" 等于 "),t("code",[s._v("boy")]),s._v(" 的数据。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("不加括号的时候条件运算符的优先级是："),t("br"),s._v(" "),t("code",[s._v("NOT")]),s._v(" 最高"),t("br"),s._v(" "),t("code",[s._v("AND")]),s._v(" 其次"),t("br"),s._v(" "),t("code",[s._v("OR")]),s._v("  最低")])]),s._v(" "),t("h3",{attrs:{id:"投影查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#投影查询"}},[s._v("#")]),s._v(" 投影查询")]),s._v(" "),t("p",[s._v("有些时候我们并不想返回所有列的信息，而只是想返回指定列的信息。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT name, city, gender FROM students\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询，"),t("code",[s._v("city")]),s._v(" "),t("code",[s._v("name")]),s._v(" "),t("code",[s._v("gender")]),s._v(" 三列的数据。")]),s._v(" "),t("h3",{attrs:{id:"排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#排序"}},[s._v("#")]),s._v(" 排序")]),s._v(" "),t("p",[t("code",[s._v("ORDER BY")]),s._v(" 可以帮助我们在查询数据的时候快速排序，默认是 "),t("code",[s._v("ASC")]),s._v(" 从小到大")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students ORDER BY age\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，以 "),t("code",[s._v("age")]),s._v(" 为基础，从低到高输出。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students ORDER BY age DESC\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，以 "),t("code",[s._v("age")]),s._v(" 为基础，从高到输出。\n"),t("br")]),s._v(" "),t("p",[s._v("如果有相同的数据，需要进一步排序。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students ORDER BY age DESC, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，以 "),t("code",[s._v("age")]),s._v(" 为基础，从高到输出，如果有相同的数据，再按 "),t("code",[s._v("id")]),s._v(" 排序。")]),s._v(" "),t("h3",{attrs:{id:"分页查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分页查询"}},[s._v("#")]),s._v(" 分页查询")]),s._v(" "),t("p",[s._v("在使用 "),t("code",[s._v("MySQL")]),s._v(" 查询数据的时候，可能会一次性查出非常多的数据，这时候就有必要对数据进行分页。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("LIMIT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("单页数据量"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" OFFSET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("从第几条数据开始获取"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("以上为基础的语法，其中 "),t("code",[s._v("LIMIT")]),s._v(" 后面跟着的是一次获取的数据量，"),t("code",[s._v("OFFSET")]),s._v(" 后面跟着的是从第几条数据开始获取。"),t("br"),s._v("\n假设"),t("code",[s._v("LIMIT")]),s._v(" 的值为 "),t("code",[s._v("pageSize")]),s._v(", "),t("code",[s._v("OFFSET")]),s._v(" 的计算公式为："),t("code",[s._v("pageSize * (pageIndex - 1)")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM students LIMIT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" OFFSET "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中查询数据，获取第一页数据，获取三条。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("OFFSET")]),s._v(" 超过了最大数量并不会报错，而是会得到一个空的结果集。")]),s._v(" "),t("li",[t("code",[s._v("OFFSET")]),s._v(" 是可选的，如果只写了 "),t("code",[s._v("LIMIT 15")]),s._v("，那么他等同于 "),t("code",[s._v("LIMIT 15 OFFSET 0")]),s._v("。")]),s._v(" "),t("li",[t("code",[s._v("LIMIT <M> OFFSET <N>")]),s._v(" 分页时，"),t("code",[s._v("N")]),s._v(" 越大，查询效率越低。")])]),s._v(" "),t("h3",{attrs:{id:"聚合查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#聚合查询"}},[s._v("#")]),s._v(" 聚合查询")]),s._v(" "),t("p",[s._v("如果要统计一个表有多少条数据该怎么处理？通常情况下我都是先取出来然后再去使用 "),t("code",[s._v("PHP")]),s._v(" 计算，其实 "),t("code",[s._v("MySQL")]),s._v(" 是可以自己计算的。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT COUNT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" FROM students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("其中 "),t("code",[s._v("COUNT(*)")]),s._v(" 为查询所有列的行数，要注意的是，虽然聚合查询返回的是一个数字，但依然是一个二维的表，只不过这个表只有一行一列，并且列名是 "),t("code",[s._v("COUNT(*)")]),s._v("。\n"),t("br")]),s._v(" "),t("p",[s._v("通常情况下，使用聚合查询时，我们会给列一个别名，便于处理结果。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT COUNT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" num FROM students WHERE gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用聚合查询的时候依然可以使用 "),t("code",[s._v("WHERE")]),s._v(" 字句。\n"),t("br")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("SUM")]),s._v(" "),t("td",[s._v("计算某一列的合集值，该列必须为数值类型")])]),s._v(" "),t("tr",[t("td",[s._v("AVG")]),s._v(" "),t("td",[s._v("计算某一列的平均值，该列必须为数值类型")])]),s._v(" "),t("tr",[t("td",[s._v("MAX")]),s._v(" "),t("td",[s._v("计算某一列的最大值")])]),s._v(" "),t("tr",[t("td",[s._v("MIN")]),s._v(" "),t("td",[s._v("计算某一列的最小值")])])])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("MAX")]),s._v(" 和 "),t("code",[s._v("MIN")]),s._v(" 并不局限于数值类型。如果是字符串类型的话，将会返回排列最前或最后的值。")]),s._v(" "),t("li",[s._v("使用聚合查询但是没有匹配到任何行的时候，"),t("code",[s._v("COUNT()")]),s._v(" 会返回 "),t("code",[s._v("0")]),s._v("，"),t("code",[s._v("SUM()、AVG()、MAX()、MIN()")]),s._v(" 会返回 "),t("code",[s._v("NULL")]),s._v("。")])]),s._v(" "),t("h4",{attrs:{id:"分组聚合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分组聚合"}},[s._v("#")]),s._v(" 分组聚合")]),s._v(" "),t("p",[s._v("假如有这么表。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("class")]),s._v(" "),t("th",[s._v("name")]),s._v(" "),t("th",[s._v("gender")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("1")]),s._v(" "),t("td",[s._v("aa")]),s._v(" "),t("td",[s._v("男")])]),s._v(" "),t("tr",[t("td",[s._v("1")]),s._v(" "),t("td",[s._v("bb")]),s._v(" "),t("td",[s._v("男")])]),s._v(" "),t("tr",[t("td",[s._v("2")]),s._v(" "),t("td",[s._v("cc")]),s._v(" "),t("td",[s._v("女")])]),s._v(" "),t("tr",[t("td",[s._v("2")]),s._v(" "),t("td",[s._v("dd")]),s._v(" "),t("td",[s._v("男")])]),s._v(" "),t("tr",[t("td",[s._v("3")]),s._v(" "),t("td",[s._v("ee")]),s._v(" "),t("td",[s._v("女")])]),s._v(" "),t("tr",[t("td",[s._v("3")]),s._v(" "),t("td",[s._v("ff")]),s._v(" "),t("td",[s._v("男")])]),s._v(" "),t("tr",[t("td",[s._v("3")]),s._v(" "),t("td",[s._v("gg")]),s._v(" "),t("td",[s._v("女")])])])]),s._v(" "),t("p",[s._v("现在要查询每个班级有多少人。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT COUNT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" num, class FROM "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" GROUP BY class\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("以数量和 "),t("code",[s._v("class")]),s._v(" 为基准，查询 "),t("code",[s._v("students")]),s._v(" 表中每个 "),t("code",[s._v("class")]),s._v(" 的数量。结果为 "),t("code",[s._v("class")]),s._v(" 为 "),t("code",[s._v("1")]),s._v(" 的有两个，为 "),t("code",[s._v("2")]),s._v(" 的有两个，为 "),t("code",[s._v("3")]),s._v(" 的有三个。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("class")]),s._v(" "),t("th",[s._v("num")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("1")]),s._v(" "),t("td",[s._v("2")])]),s._v(" "),t("tr",[t("td",[s._v("2")]),s._v(" "),t("td",[s._v("2")])]),s._v(" "),t("tr",[t("td",[s._v("3")]),s._v(" "),t("td",[s._v("3")])])])]),s._v(" "),t("p",[t("code",[s._v("GROUP BY")]),s._v(" 后面还可以加多个条件。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT COUNT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" num, class, gender FROM "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" GROUP BY class, gender\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这条的意思是说，查询每个班级男女总数。将会输出三列，分别为 "),t("code",[s._v("num")]),s._v(" 查询到的数量、"),t("code",[s._v("class")]),s._v(" 班级名、"),t("code",[s._v("gender")]),s._v(" 性别。")]),s._v(" "),t("h3",{attrs:{id:"多表查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多表查询"}},[s._v("#")]),s._v(" 多表查询")]),s._v(" "),t("p",[t("code",[s._v("MySQL")]),s._v(" 允许一次性查询多个表的数据。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT * FROM "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students, classed"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("同时查询 "),t("code",[s._v("students")]),s._v(" 和 "),t("code",[s._v("classed")]),s._v(" 两个表的数据。这种查询又叫笛卡尔查询，使用笛卡尔查询时要非常小心。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("这种查询返回的数据依然是一个二维表，但是需要注意的是，这个结果集是两个表的乘积，即每组数据都两两结合返回。结果集的列数是两个表列数"),t("strong",[s._v("之和")]),s._v("，结果集的行数是两个表行数"),t("strong",[s._v("之积")]),s._v("！即：如果两个表分别有 "),t("code",[s._v("10")]),s._v(" 个字段和 "),t("code",[s._v("1000")]),s._v(" 条数据，那么返回的结果集就有 "),t("code",[s._v("20")]),s._v(" 个字段，"),t("code",[s._v("1,000,000")]),s._v(" 条数据！")])]),s._v(" "),t("br"),s._v(" "),t("p",[s._v("还有需要注意的地方是，两个不同的表可能会有同样的字段名，如果不加以区分的话可能无法识别。这时候我们可以使用投影查询的别名功能进行重命名。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT \n  student.id sid,\n  student.name sname,\n  student.gender,\n  classed.id uid,\n  classed.name cname\nFROM student, classed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("在多表查询中，要使用 "),t("code",[s._v("表名.列名")]),s._v(" 来引用列，然后加空格来设置别名。以上分别将两个表的 "),t("code",[s._v("id")]),s._v(" 和 "),t("code",[s._v("name")]),s._v(" 字段设置了别名。\n"),t("br")]),s._v(" "),t("p",[s._v("但是表名很长的话还是写起来还是很麻烦，所以还可以继续给表设置别名。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT \n  s.id sid,\n  s.name sname,\n  s.gender,\n  c.id uid,\n  c.name cname\nFROM student s, classed c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("以上，我们分别用 "),t("code",[s._v("s")]),s._v(" 和 "),t("code",[s._v("c")]),s._v(" 代替 "),t("code",[s._v("stuendts")]),s._v(" 和 "),t("code",[s._v("classed")]),s._v(" 两个表。\n"),t("br")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT \n  s.id sid,\n  s.name sname,\n  s.gender,\n  c.id uid,\n  c.name cname\nFROM student s, classed c\nWHERE s.gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v(" AND c.name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'tao'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("同样，我们还可以继续使用 "),t("code",[s._v("WHERE")]),s._v(" 子句来增加条件，以减少筛选出来的数据量。")]),s._v(" "),t("h3",{attrs:{id:"连接查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接查询"}},[s._v("#")]),s._v(" 连接查询")]),s._v(" "),t("p",[s._v("连接查询为另一种多表查询。首先需要确定一个主表为结果集，然后把其他的表有选择性的连接到主表上。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("使用别名可以有效的简化查询语句的复杂度")])]),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"inner-join-内连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inner-join-内连接"}},[s._v("#")]),s._v(" INNER JOIN 内连接")]),s._v(" "),t("p",[s._v("假如，我需要到"),t("code",[s._v("students")]),s._v("表中查一组学生的信息，这段结果集里面有 "),t("code",[s._v("class")]),s._v(" ，但是这个 "),t("code",[s._v("class")]),s._v(" 并不是对应的班级名称，如果要查询班级名称需要到另外一个表 "),t("code",[s._v("classes")]),s._v(" 中查询。那这时候就可以使用连接查询。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELECT s.id, s.name, s.class_id, c.name class_name, s.gender, s.score\nFROM students s,\nINNER JOIN classes c,\nON s.class_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c.id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("先确定主表。主表使用 "),t("code",[s._v("FROM <表1>")]),s._v(" 连接。")]),s._v(" "),t("li",[s._v("在确定需要连接的表。使用 "),t("code",[s._v("INNER JOIN <表2>")]),s._v(" 连接。")]),s._v(" "),t("li",[s._v("然后确定连接条件。使用 "),t("code",[s._v("ON <条件...>")]),s._v(" ，这里的条件是 "),t("code",[s._v("s.class_id = c.id")]),s._v(" 意思就是说 "),t("code",[s._v("students")]),s._v(" 表中的 "),t("code",[s._v("class_id")]),s._v(" 字段和 "),t("code",[s._v("classes")]),s._v(" 表中的 "),t("code",[s._v("id")]),s._v(" 字段一样时进行连接。")]),s._v(" "),t("li",[s._v("可选的 "),t("code",[s._v("WHERE")]),s._v(" 或者 "),t("code",[s._v("ORDER BY")]),s._v(" 字句。")])]),s._v(" "),t("h4",{attrs:{id:"outer-join-外连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#outer-join-外连接"}},[s._v("#")]),s._v(" OUTER JOIN 外连接")]),s._v(" "),t("p",[s._v("外连接又分为："),t("code",[s._v("RIGHT OUTER JOIN")]),s._v(" 和 "),t("code",[s._v("LEFT OUTER JOIN")]),s._v(" 以及 "),t("code",[s._v("FULL OUTER JOIN")]),s._v("。\n"),t("br")]),s._v(" "),t("p",[s._v("这三个的区别是什么？和 "),t("code",[s._v("INNER JOIN")]),s._v(" 的区别又是什么？\n"),t("br")]),s._v(" "),t("p",[t("strong",[s._v("左边表为主表，右边表为从表")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("INNER JOIN")]),s._v(" 返回的是 "),t("strong",[s._v("两个表共有")]),s._v(" 的数据"),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/server/mysql/inner.png")}})]),s._v(" "),t("li",[t("code",[s._v("RIGHT OUTER JOIN")]),s._v(" 返回的是两个表共有的数据加上 "),t("strong",[s._v("从表存在但是主表不存在")]),s._v(" 的数据。"),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/server/mysql/right.png")}})]),s._v(" "),t("li",[t("code",[s._v("LEFT OUTER JOIN")]),s._v(" 返回的是两个表共有的数据加上 "),t("strong",[s._v("主表存在但是从表不存在")]),s._v(" 的数据。"),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/server/mysql/left.png")}})]),s._v(" "),t("li",[t("code",[s._v("FULL OUTER JOIN")]),s._v(" 返回的是 "),t("strong",[s._v("两个表都有")]),s._v(" 的数据。"),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/server/mysql/full.png")}})]),s._v(" "),t("li",[s._v("如果一个表有数据，另外一个表没数据的话，没数据的字段返回 "),t("code",[s._v("NULL")])])]),s._v(" "),t("h2",{attrs:{id:"修改数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改数据"}},[s._v("#")]),s._v(" 修改数据")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("对于关系型数据，基础的操作就是增删改查，前面已经详细介绍了查，下面介绍增删改")])]),s._v(" "),t("h3",{attrs:{id:"新增数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新增数据"}},[s._v("#")]),s._v(" 新增数据")]),s._v(" "),t("p",[s._v("当我们向数据库内插入一条新的数据时，就需要使用到 "),t("code",[s._v("INSERT")]),s._v(" 语句。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基础语法")]),s._v("\nINSERT INTO "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("表名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("字段1, 字段2, "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" VALUES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("值1, 值2, "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("假如我们向 "),t("code",[s._v("students")]),s._v(" 表中插入一段数据。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("INSERT INTO "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("class_id, name, gender, score"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" VALUES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小明'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("需要注意的是，我们在新增数据的时候并没有写 "),t("code",[s._v("id")]),s._v(" 这个字段，因为 "),t("code",[s._v("id")]),s._v(" 这个字段在数据库中是"),t("strong",[s._v("自增主键")]),s._v("，是数据库会自动添加的。如果一个字段允许为空的话，这里也可以不出现该字段名。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("INSERT INTO "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("class_id, name, gender, score"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" VALUES\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小红'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'girl'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小杨'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'girl'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小王'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boy'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("同时添加多条数据。")]),s._v(" "),t("h3",{attrs:{id:"更新数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新数据"}},[s._v("#")]),s._v(" 更新数据")]),s._v(" "),t("p",[s._v("当我们需要更新数据库内的一条数据时，就需要使用 "),t("code",[s._v("UPDATE")]),s._v(" 语句。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基础语法")]),s._v("\nUPDATE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("表名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET 字段1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 值1, 字段2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 值2, "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". WHERE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("假如我们需要更新一条数据")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("UPDATE "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" SET "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'大牛'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("score")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" WHERE "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("意思是将 "),t("code",[s._v("students")]),s._v(" 这个表里面 "),t("code",[s._v("id = 2")]),s._v(" 的这条数据，"),t("code",[s._v("name")]),s._v(" 改成 "),t("code",[s._v("大牛")]),s._v("，"),t("code",[s._v("score")]),s._v(" 改成 "),t("code",[s._v("80")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("还可以增大 "),t("code",[s._v("WHERE")]),s._v(" 语句的范围")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("UPDATE "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" SET "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小牛'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("score")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("66")]),s._v(" WHERE id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" AND id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("意思是将 "),t("code",[s._v("students")]),s._v(" 这个表里面的 "),t("code",[s._v("id")]),s._v(" 大于等于5，小于8的所有数据的 "),t("code",[s._v("name")]),s._v(" 改成小牛，"),t("code",[s._v("score")]),s._v(" 改成 "),t("code",[s._v("66")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("更新字段的时候也可以使用表达式")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("UPDATE "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" SET "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("score")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("score+10 WHERE score"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("意思是将 "),t("code",[s._v("students")]),s._v(" 这个表里面 "),t("code",[s._v("score")]),s._v(" 小于 "),t("code",[s._v("60")]),s._v(" 的全部在原基础上加10分。")]),s._v(" "),t("p",[t("strong",[s._v("需要注意的")])]),s._v(" "),t("ul",[t("li",[s._v("如果 "),t("code",[s._v("WHERE")]),s._v(" 没有匹配到任何数据，那么他不会报错，也不会修改任何数据")]),s._v(" "),t("li",[t("code",[s._v("UPDATE")]),s._v("  语句可以没有 "),t("code",[s._v("WHERE")]),s._v(" 条件。如果没有 "),t("code",[s._v("WHERE")]),s._v(" 条件的话他会更新所有的数据。")]),s._v(" "),t("li",[s._v("所以在执行 "),t("code",[s._v("UPDATE")]),s._v(" 语句的时候要小心，最好先用 "),t("code",[s._v("SELECT")]),s._v(" 语句来测试 "),t("code",[s._v("WHERE")]),s._v(" 语句是否获取到了正确的数据，然后再决定是否更新。")])]),s._v(" "),t("p",[t("strong",[t("code",[s._v("UPDATE")]),s._v(" 语句会返回更新的行数以及 "),t("code",[s._v("WHERE")]),s._v(" 匹配到的行数")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" UPDATE students SET "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'大宝'")]),s._v(" WHERE "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出")]),s._v("\nQuery OK, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" row affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nRows matched: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  Changed: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  Warnings: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"删除数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除数据"}},[s._v("#")]),s._v(" 删除数据")]),s._v(" "),t("p",[s._v("当我们需要删除一条数据的时候，就会用到 "),t("code",[s._v("DELETE")]),s._v(" 语句。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基础语法")]),s._v("\nDELETE FROM "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("表名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" WHERE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("DELETE FROM "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" WHERE "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("students")]),s._v(" 表中删除 "),t("code",[s._v("id = 3")]),s._v(" 的这条数据。")]),s._v(" "),t("p",[t("strong",[s._v("使用条件判断一次删除多条数据")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("DELECT FROM "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" WHERE score"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" AND score"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("需要注意的")])]),s._v(" "),t("ul",[t("li",[s._v("如果 "),t("code",[s._v("WHERE")]),s._v(" 没有匹配到任何数据，那么他不会报错，也不会修改任何数据")]),s._v(" "),t("li",[s._v("和 "),t("code",[s._v("UPDATE")]),s._v(" 类似，"),t("code",[s._v("DELETE")]),s._v(" 语句也可以没有 "),t("code",[s._v("WHERE")]),s._v(" 字句，这样他会删除整个表。")]),s._v(" "),t("li",[s._v("和 "),t("code",[s._v("UPDATE")]),s._v(" 一样，在执行 "),t("code",[s._v("DELETE")]),s._v(" 语句之前最好也用 "),t("code",[s._v("SELECT")]),s._v(" 语句来验证 "),t("code",[s._v("WHERE")]),s._v(" 数据的正确性。")])]),s._v(" "),t("p",[t("strong",[t("code",[s._v("DELETE")]),s._v(" 语句也会返回更新的行数以及 "),t("code",[s._v("WHERE")]),s._v(" 匹配到的行数")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" DELETE FROM students WHERE "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" row affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" DELETE FROM students WHERE "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("999")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" rows affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"实用语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实用语句"}},[s._v("#")]),s._v(" 实用语句")]),s._v(" "),t("p",[s._v("在编写SQL时，灵活运用一些技巧，可以大大简化程序逻辑。")]),s._v(" "),t("h3",{attrs:{id:"插入或替换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插入或替换"}},[s._v("#")]),s._v(" 插入或替换")]),s._v(" "),t("p",[s._v("如果我们希望插入一条新记录 "),t("code",[s._v("INSERT")]),s._v("，但如果记录已经存在，就先删除原记录，再插入新记录。此时，可以使用 "),t("code",[s._v("REPLACE")]),s._v(" 语句，这样就不必先查询，再决定是否先删除再插入：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("REPLACE INTO students "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id, class_id, name, gender, score"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" VALUES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小明'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果没有找到 "),t("code",[s._v("id=1")]),s._v(" 的数据，那么这条数据将会被插入数据库，如果找到了则会先删除 "),t("code",[s._v("id=1")]),s._v(" 这条数据，然后再插入新的数据。")]),s._v(" "),t("h3",{attrs:{id:"插入或更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插入或更新"}},[s._v("#")]),s._v(" 插入或更新")]),s._v(" "),t("p",[s._v("如果我们希望插入一条新记录 "),t("code",[s._v("INSERT")]),s._v("，但如果记录已经存在，就更新该记录，此时，可以使用 "),t("code",[s._v("INSERT INTO ... ON DUPLICATE KEY UPDATE ...")]),s._v(" 语句：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("INSERT INTO students "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id, class_id, name, gender, score"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" VALUES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小明'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ON DUPLICATE KEY UPDATE "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小明'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gender")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("score")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果没有找到 "),t("code",[s._v("id=1")]),s._v(" 的数据，那么这条数据将被插入数据库，如果找到了则会更新 "),t("code",[s._v("UPDATE")]),s._v(" 后面的字段及数据。")]),s._v(" "),t("h3",{attrs:{id:"插入或忽略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插入或忽略"}},[s._v("#")]),s._v(" 插入或忽略")]),s._v(" "),t("p",[s._v("如果我们希望插入一条新记录 "),t("code",[s._v("INSERT")]),s._v("，但如果记录已经存在，就啥事也不干直接忽略，此时，可以使用 "),t("code",[s._v("INSERT IGNORE INTO ...")]),s._v(" 语句：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("INSERT IGNORE INTO students "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id, class_id, name, gender, score"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" VALUES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'小明'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果没有找到 "),t("code",[s._v("id=1")]),s._v(" 的数据，那么这条数据江北插入数据库，如果找到了则忽略。")]),s._v(" "),t("h2",{attrs:{id:"mysql-事务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-事务"}},[s._v("#")]),s._v(" MySQL 事务")])])}),[],!1,null,null,null);a.default=n.exports}}]);